
          window.__NEXT_REGISTER_PAGE('/lotteries/lottery', function() {
            var comp = module.exports=webpackJsonp([3],{890:function(e,t,n){e.exports=n(891)},891:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(58),l=r(a),s=n(60),u=r(s),c=n(27),o=r(c),i=n(20),d=r(i),f=n(21),m=r(f),h=n(28),p=r(h),y=n(29),b=r(y),v=n(0),k=r(v),g=n(54),w=n(416),E=r(w),C=(n(70),n(233)),P=r(C),S=n(126),T=r(S),M=n(95),_=r(M),x=n(249),W=r(x),O=n(892),L=r(O),B=n(893),A=r(B),j=n(894),N=r(j),R=n(363),V=r(R),D=(n(403),function(e){function t(){var e,n,r,a,s=this;(0,d.default)(this,t);for(var c=arguments.length,i=Array(c),f=0;f<c;f++)i[f]=arguments[f];return n=r=(0,p.default)(this,(e=t.__proto__||(0,o.default)(t)).call.apply(e,[this].concat(i))),r.state={lotteryAddress:r.props.url.query.lotteryAddress,lotteryValue:"",deadline:Date.now(),lotteryJackPot:"",lotteryHasPlayed:"",owner:"",accounts:"",canBuyLottery:"",canPickWinner:"",loading:!0,timeStarted:"",number4:"",numbers3:[],prize:"",numOfWinners:"",winningNumber:"",winnersPaid:!0},r.setLotteryValues=function(){var e=(0,u.default)(l.default.mark(function e(t){var n,a,u,c,o,i,d,f,m,h,p,y,b,v;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.methods.getSummary().call();case 2:return n=e.sent,e.next=5,_.default.eth.getAccounts();case 5:a=e.sent,u=n[0],c=n[1],o=n[2],i=n[7],d=n[10],f=n[12],m=!i&&Date.now()/1e3-c<0,h=!i&&Date.now()/1e3>c,i&&(o=n[6]),p=_.default.utils.fromWei(n[4],"ether"),y=n[5],b=n[11],v=n[13],console.log(n),r.setState({lotteryValue:u,deadline:c,lotteryJackPot:o,lotteryHasPlayed:i,owner:d,accounts:a,canBuyLottery:m,canPickWinner:h,loading:!1,timeStarted:f,prize:p,numOfWinners:y,winningNumber:b,winnersPaid:v});case 21:case"end":return e.stop()}},e,s)}));return function(t){return e.apply(this,arguments)}}(),r.numberPickerCallback=function(e,t){r.setState({number4:e,numbers3:t})},r.setIntervalFunction=function(){r.interval=setInterval(function(){r.isLotteryOpen()},2e3)},r.setEventsListeners=function(e){window.addEventListener("load",(0,u.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.setLotteryValues((0,T.default)(lotteryAddress,_.default));case 2:r.setIntervalFunction();case 3:case"end":return e.stop()}},e,s)})),!1),e.events.TicketBuy({},function(){var e=(0,u.default)(l.default.mark(function e(t,n){var a;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:null==t&&(a=n.returnValues.jackPot,r.setState({lotteryJackPot:a}));case 1:case"end":return e.stop()}},e,s)}));return function(t,n){return e.apply(this,arguments)}}()),e.events.LotteryHasPlayed({},function(){var t=(0,u.default)(l.default.mark(function t(n,a){var u,c,o,i,d,f,m,h,p;return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=n){t.next=13;break}return t.next=3,e.methods.getSummary().call();case 3:u=t.sent,c=u[6],o=_.default.utils.fromWei(u[4],"ether"),i=u[5],d=u[11],f=u[13],m=!0,h=!1,p=!1,r.setState({lotteryHasPlayed:m,canPickWinner:p,canBuyLottery:h,lotteryJackPot:c,winningNumber:d,prize:o,numOfWinners:i,winnersPaid:f});case 13:case"end":return t.stop()}},t,s)}));return function(e,n){return t.apply(this,arguments)}}())},r.isLotteryOpen=(0,u.default)(l.default.mark(function e(){var t,n,a,u,c;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=r.state,n=t.lotteryHasPlayed,a=t.deadline,u=!n&&Date.now()/1e3-a<0,c=!n&&Date.now()/1e3>a,r.setState({canBuyLottery:u,canPickWinner:c});case 4:case"end":return e.stop()}},e,s)})),a=n,(0,p.default)(r,a)}return(0,b.default)(t,e),(0,m.default)(t,[{key:"componentDidMount",value:function(){function e(){return t.apply(this,arguments)}var t=(0,u.default)(l.default.mark(function e(){var t,n;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.url.query.lotteryAddress,"undefined"==typeof window||void 0===window.web3){e.next=6;break}return n=(0,T.default)(t,_.default),e.next=5,this.setLotteryValues(n);case 5:this.setIntervalFunction();case 6:this.setEventsListeners((0,T.default)(t,W.default));case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"renderDeadline",value:function(e,t){var n=t?"Ending ":"Ended";return k.default.createElement("p",null,n," ",k.default.createElement(E.default,{precision:3,autoUpdate:!0,time:e,actualSeconds:!0}))}},{key:"renderStartTime",value:function(e){return k.default.createElement("p",null,"Started on ",k.default.createElement(E.default,{time:e,format:"full"}))}},{key:"renderCards",value:function(){var e=this.state,t=(e.lotteryValue,e.deadline),n=e.lotteryJackPot,r=e.timeStarted,a=e.canBuyLottery,l=a?"Open":"Closed",s=[{header:_.default.utils.fromWei(this.state.lotteryValue,"ether")+" Ether",meta:"We accept just Ether as payment",description:"This is the value of each ticket to enter the Lottery",style:{overflowWrap:"break-word"}},{header:"Lottery is "+l,meta:this.renderDeadline(t,a),description:this.renderStartTime(r),style:{overflowWrap:"break-word"}},{header:_.default.utils.fromWei(n,"ether")+" Ether",meta:"Lottery Jackpot",description:"This jackpot will be release to the winners",style:{overflowWrap:"break-word"}}];return k.default.createElement(g.Card.Group,{items:s})}},{key:"renderPickWinnerButton",value:function(){var e=this.state,t=e.lotteryAddress,n=e.canPickWinner,r=e.lotteryHasPlayed,a=e.owner,l=e.accounts;return!r&&n&&l.length>0&&a.toString()==l[0].toString()?k.default.createElement(A.default,{lotteryAddress:t,canPickWinner:n,lotteryHasPlayed:r}):null}},{key:"renderModal",value:function(){var e=this.state,t=e.lotteryHasPlayed,n=e.numOfWinners,r=e.winningNumber,a=e.prize,l=e.lotteryJackPot,s=e.winnersPaid,u=e.lotteryAddress,c=e.owner,o=e.accounts,i=_.default.utils.fromWei(l,"ether"),d=o.length>0&&c.toString()==o[0].toString();return t?k.default.createElement(V.default,{lotteryHasPlayed:t,numOfWinners:n,winningNumber:r,prize:a,finalJackPot:i,showMessage:!1,winnersPaid:s,lotteryAddress:u,isOwner:d}):null}},{key:"render",value:function(){var e=this.state,t=e.canPickWinner,n=e.canBuyLottery,r=e.number4,a=(e.lotteryHasPlayed,e.lotteryValue),l=e.lotteryAddress,s=e.numbers3;return k.default.createElement(P.default,null,k.default.createElement(g.Dimmer,{active:this.state.loading},k.default.createElement(g.Loader,{size:"large"},"Loading")),k.default.createElement(g.Container,{style:{marginTop:"100px"}},this.renderModal(),k.default.createElement(g.Grid,null,k.default.createElement(g.Grid.Column,{width:10},this.renderCards()),k.default.createElement(g.Grid.Column,{width:6},k.default.createElement(g.Segment,null,k.default.createElement(L.default,{number4:r,canPickWinner:t,canBuyLottery:n,lotteryValue:a,lotteryAddress:l,numbers3:s}),k.default.createElement(N.default,{callback:this.numberPickerCallback})),this.renderPickWinnerButton()))))}}]),t}(v.Component));t.default=D},892:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(58),l=r(a),s=n(60),u=r(s),c=n(27),o=r(c),i=n(20),d=r(i),f=n(21),m=r(f),h=n(28),p=r(h),y=n(29),b=r(y),v=n(0),k=r(v),g=n(54),w=n(126),E=r(w),C=n(95),P=r(C),S=n(70),T=function(e){function t(){var e,n,r,a,s=this;(0,d.default)(this,t);for(var c=arguments.length,i=Array(c),f=0;f<c;f++)i[f]=arguments[f];return n=r=(0,p.default)(this,(e=t.__proto__||(0,o.default)(t)).call.apply(e,[this].concat(i))),r.state={value:"",errroMessage:"",loading:!1,number4:r.props.number4,numbers3:r.props.numbers3,canPickWinner:r.props.canPickWinner,canBuyLottery:r.props.canBuyLottery,lotteryValue:r.props.lotteryValue,lotteryAddress:r.props.lotteryAddress,network:!0,provider:!0},r.onSubmit=function(){var e=(0,u.default)(l.default.mark(function e(t){var n,a,u,c,o,i,d,f,m;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=r.state,a=n.lotteryAddress,u=n.canBuyLottery,c=n.lotteryValue,o=n.number4,i=n.numbers3,d=(0,E.default)(a,P.default),e.next=5,r.checkNetwork();case 5:if(!(f=e.sent)||!u){e.next=21;break}return r.setState({loading:!0,errroMessage:""}),e.prev=8,e.next=11,P.default.eth.getAccounts();case 11:return m=e.sent,e.next=14,d.methods.enter(o,i).send({from:m[0],value:c});case 14:S.Router.replaceRoute("/lotteries/"+a),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(8),r.setState({errroMessage:e.t0.message.split("\n")[0]});case 20:r.setState({loading:!1,value:""});case 21:case"end":return e.stop()}},e,s,[[8,17]])}));return function(t){return e.apply(this,arguments)}}(),r.checkNetwork=(0,u.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r.state.provider){e.next=5;break}return r.setState({errroMessage:"Use Mist or Metamask to send the Transaction"}),e.abrupt("return",!1);case 5:if(r.state.network){e.next=8;break}return r.setState({errroMessage:"Select The Rinkeby network"}),e.abrupt("return",!1);case 8:return e.abrupt("return",!0);case 9:case"end":return e.stop()}},e,s)})),r.setCheckNetworkInterval=function(){r.interval=setInterval(function(){void 0===window.web3&&r.setState({provider:!1}),window.web3.version.getNetwork(function(e,t){4!=t&&r.setState({network:!1})})},1e3)},a=n,(0,p.default)(r,a)}return(0,b.default)(t,e),(0,m.default)(t,[{key:"componentDidMount",value:function(){var e=this;"undefined"!=typeof window?this.setCheckNetworkInterval():window.addEventListener("load",(0,u.default)(l.default.mark(function t(){return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.setCheckNetworkInterval();case 1:case"end":return t.stop()}},t,e)})),!1)}},{key:"componentWillReceiveProps",value:function(e){this.setState({number4:e.number4,numbers3:e.numbers3,canPickWinner:e.canPickWinner,canBuyLottery:e.canBuyLottery,lotteryValue:e.lotteryValue})}},{key:"renderButton",value:function(){return this.state.canBuyLottery?k.default.createElement(g.Button,{positive:10==this.state.number4.length,loading:this.state.loading},"Buy"):k.default.createElement(g.Button,{negative:!0},"Ended")}},{key:"render",value:function(){return k.default.createElement(g.Form,{onSubmit:this.onSubmit,error:!!this.state.errroMessage},k.default.createElement(g.Form.Field,null,k.default.createElement("label",null,"Enter the lottery")),this.renderButton(),k.default.createElement(g.Message,{error:!0,header:"Oops!",content:this.state.errroMessage}))}}]),t}(v.Component);t.default=T},893:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(58),l=r(a),s=n(60),u=r(s),c=n(27),o=r(c),i=n(20),d=r(i),f=n(21),m=r(f),h=n(28),p=r(h),y=n(29),b=r(y),v=n(0),k=r(v),g=n(54),w=n(126),E=r(w),C=n(95),P=r(C),S=(n(70),function(e){function t(){var e,n,r,a,s=this;(0,d.default)(this,t);for(var c=arguments.length,i=Array(c),f=0;f<c;f++)i[f]=arguments[f];return n=r=(0,p.default)(this,(e=t.__proto__||(0,o.default)(t)).call.apply(e,[this].concat(i))),r.state={value:"",errroMessage:"",loading:!1,lotteryAddress:r.props.lotteryAddress},r.onSubmit=function(){var e=(0,u.default)(l.default.mark(function e(t){var n,a;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=(0,E.default)(r.state.lotteryAddress,P.default),r.setState({loading:!0,errroMessage:""}),e.prev=3,e.next=6,P.default.eth.getAccounts();case 6:return a=e.sent,e.next=9,n.methods.playTheLottery().send({from:a[0]});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),r.setState({errroMessage:e.t0.message.split("\n")[0]});case 14:r.setState({loading:!1,value:""});case 15:case"end":return e.stop()}},e,s,[[3,11]])}));return function(t){return e.apply(this,arguments)}}(),a=n,(0,p.default)(r,a)}return(0,b.default)(t,e),(0,m.default)(t,[{key:"render",value:function(){return k.default.createElement(g.Form,{onSubmit:this.onSubmit,error:!!this.state.errroMessage},k.default.createElement(g.Button,{positive:!0,loading:this.state.loading},"Pick Winner"),k.default.createElement(g.Message,{error:!0,header:"Oops!",content:this.state.errroMessage}))}}]),t}(v.Component));t.default=S},894:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(27),l=r(a),s=n(20),u=r(s),c=n(21),o=r(c),i=n(28),d=r(i),f=n(29),m=r(f),h=n(0),p=r(h),y=n(54),b=function(e){function t(){var e,n,r,a;(0,u.default)(this,t);for(var s=arguments.length,c=Array(s),o=0;o<s;o++)c[o]=arguments[o];return n=r=(0,d.default)(this,(e=t.__proto__||(0,l.default)(t)).call.apply(e,[this].concat(c))),r.state={cells:[],numbers:[],numbersObj:[],finalNumbers:[]},r.sortFinalNumbers=function(){var e=r.state.numbers.sort(function(e,t){return e-t});if(r.setState({finalNumbers:e}),e.length<4)return void r.props.callback({number4:"",numbers3:[]});var t=r.convertToBytes(e),n=r.convertEachToBytes(r.k_combinations(e,3));r.props.callback(t,n)},a=n,(0,d.default)(r,a)}return(0,m.default)(t,e),(0,o.default)(t,[{key:"componentDidMount",value:function(){for(var e=[],t=[],n=0;n<9;n++)e[n]=n;for(var r=1;r<=100;r++)100!=r&&(t[r]={selected:!1});this.setState({cells:e,numbersObj:t})}},{key:"cellClick",value:function(e,t){var n=this.state.numbersObj,r=this.state.numbers,a=r.indexOf(e);a>-1?(r.splice(a,1),n[e].selected=!1):r.length<4&&(r.push(e),n[e].selected=!0),this.sortFinalNumbers(),this.setState({numbersObj:n,numbers:r})}},{key:"checkSelected",value:function(e){for(var t=0;t<this.state.numbers.length;t++)if(this.state.numbers[t]==e)return!0;return!1}},{key:"convertToBytes",value:function(e){for(var t="",n=0;n<e.length;n++){var r=e[n].toString(16);1==r.length&&(r="0"+r),t+=r}return"0x"+t}},{key:"convertEachToBytes",value:function(e){for(var t=[],n=0;n<e.length;n++)t[n]=this.convertToBytes(e[n]);return t}},{key:"k_combinations",value:function(e,t){var n=void 0,r=void 0,a=void 0,l=void 0,s=void 0;if(t>e.length||t<=0)return[];if(t==e.length)return[e];if(1==t){for(a=[],n=0;n<e.length;n++)a.push([e[n]]);return a}for(a=[],n=0;n<e.length-t+1;n++)for(l=e.slice(n,n+1),s=this.k_combinations(e.slice(n+1),t-1),r=0;r<s.length;r++){var u=l.concat(s[r]);u=u.sort(function(e,t){return e-t}),a.push(u)}return a}},{key:"render",value:function(){var e=this;return p.default.createElement(y.Table,{celled:!0,textAlign:"center"},p.default.createElement(y.Table.Header,null,p.default.createElement(y.Table.Row,null,p.default.createElement(y.Table.HeaderCell,{colSpan:"9"},"Pick 4 Numbers"))),p.default.createElement(y.Table.Body,null,p.default.createElement(y.Table.Row,null,this.state.cells.map(function(t){return p.default.createElement(y.Table.Cell,{onClick:e.cellClick.bind(e,t+1),key:t+1,warning:e.state.numbersObj[t+1].selected,selectable:!0},p.default.createElement("a",{href:"#"},t+1))})),p.default.createElement(y.Table.Row,null,this.state.cells.map(function(t){return p.default.createElement(y.Table.Cell,{onClick:e.cellClick.bind(e,t+e.state.cells.length+1),key:t+e.state.cells.length+1,warning:e.state.numbersObj[t+e.state.cells.length+1].selected,selectable:!0},p.default.createElement("a",{href:"#"},t+e.state.cells.length+1))})),p.default.createElement(y.Table.Row,null,this.state.cells.map(function(t){return p.default.createElement(y.Table.Cell,{onClick:e.cellClick.bind(e,t+2*e.state.cells.length+1),warning:e.state.numbersObj[t+2*e.state.cells.length+1].selected,key:t+2*e.state.cells.length+1,selectable:!0},p.default.createElement("a",{href:"#"},t+2*e.state.cells.length+1))})),p.default.createElement(y.Table.Row,null,this.state.cells.map(function(t){return p.default.createElement(y.Table.Cell,{onClick:e.cellClick.bind(e,t+3*e.state.cells.length+1),warning:e.state.numbersObj[t+3*e.state.cells.length+1].selected,key:t+3*e.state.cells.length+1,selectable:!0},p.default.createElement("a",{href:"#"},t+3*e.state.cells.length+1))})),p.default.createElement(y.Table.Row,null,this.state.cells.map(function(t){return p.default.createElement(y.Table.Cell,{onClick:e.cellClick.bind(e,t+4*e.state.cells.length+1),warning:e.state.numbersObj[t+4*e.state.cells.length+1].selected,key:t+4*e.state.cells.length+1,selectable:!0},p.default.createElement("a",{href:"#"},t+4*e.state.cells.length+1))})),p.default.createElement(y.Table.Row,null,this.state.cells.map(function(t){return p.default.createElement(y.Table.Cell,{onClick:e.cellClick.bind(e,t+5*e.state.cells.length+1),warning:e.state.numbersObj[t+5*e.state.cells.length+1].selected,key:t+5*e.state.cells.length+1,selectable:!0},p.default.createElement("a",{href:"#"},t+5*e.state.cells.length+1))})),p.default.createElement(y.Table.Row,null,this.state.cells.map(function(t){return p.default.createElement(y.Table.Cell,{onClick:e.cellClick.bind(e,t+7*e.state.cells.length+1),warning:e.state.numbersObj[t+7*e.state.cells.length+1].selected,key:t+7*e.state.cells.length+1,selectable:!0},p.default.createElement("a",{href:"#"},t+7*e.state.cells.length+1))})),p.default.createElement(y.Table.Row,null,this.state.cells.map(function(t){return p.default.createElement(y.Table.Cell,{onClick:e.cellClick.bind(e,t+8*e.state.cells.length+1),warning:e.state.numbersObj[t+8*e.state.cells.length+1].selected,key:t+8*e.state.cells.length+1,selectable:!0},p.default.createElement("a",{href:"#"},t+8*e.state.cells.length+1))})),p.default.createElement(y.Table.Row,null,this.state.cells.map(function(t){return p.default.createElement(y.Table.Cell,{onClick:e.cellClick.bind(e,t+9*e.state.cells.length+1),warning:e.state.numbersObj[t+9*e.state.cells.length+1].selected,key:t+9*e.state.cells.length+1,selectable:!0},p.default.createElement("a",{href:"#"},t+9*e.state.cells.length+1))})),p.default.createElement(y.Table.Row,null,this.state.cells.map(function(t){return p.default.createElement(y.Table.Cell,{onClick:e.cellClick.bind(e,t+10*e.state.cells.length+1),warning:e.state.numbersObj[t+10*e.state.cells.length+1].selected,key:t+10*e.state.cells.length+1,selectable:!0},p.default.createElement("a",{href:"#"},t+10*e.state.cells.length+1))}))),p.default.createElement(y.Table.Footer,null,p.default.createElement(y.Table.Row,null,p.default.createElement(y.Table.HeaderCell,{colSpan:"9"},p.default.createElement(y.Menu,{floated:"right",pagination:!0},p.default.createElement(y.Menu.Item,null,this.state.finalNumbers[0]),p.default.createElement(y.Menu.Item,null,this.state.finalNumbers[1]),p.default.createElement(y.Menu.Item,null,this.state.finalNumbers[2]),p.default.createElement(y.Menu.Item,null,this.state.finalNumbers[3]))))))}}]),t}(h.Component);t.default=b}},[890]);
            return { page: comp.default }
          })
        